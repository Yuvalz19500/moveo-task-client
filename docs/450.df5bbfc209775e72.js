"use strict";(self.webpackChunkmoveo_task_client=self.webpackChunkmoveo_task_client||[]).push([[450],{450:(Q,h,s)=>{s.r(h),s.d(h,{LobbyModule:()=>Y});var v=s(1791),u=s(9653);const S=(0,u.ZF)("lobby");var d=s(1052),t=s(4650),a=s(6895),g=s(5938),L=s(4859);function M(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(){const r=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.onStudentPicked(r))}),t._uU(2),t.qZA()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.username)}}let O=(()=>{class o{constructor(e,c){this.data=e,this.dialogRef=c,this.students=[]}ngOnInit(){this.students=this.data.students}onStudentPicked(e){this.dialogRef.close(e?.id)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.WI),t.Y36(g.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["moveo-task-students-modal"]],decls:5,vars:1,consts:[[1,"page-wrapper"],[1,"page-heder"],[1,"students-list-wrapper"],["class","student-button-wrapper",4,"ngFor","ngForOf"],[1,"student-button-wrapper"],["mat-button","",3,"click"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Pick A Student For A Session"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,M,3,1,"div",3),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngForOf",c.students))},dependencies:[a.sg,L.lW],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-wrapper[_ngcontent-%COMP%]   .page-heder[_ngcontent-%COMP%]{font-size:22px}.page-wrapper[_ngcontent-%COMP%]   .students-list-wrapper[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column}"]}),o})();var p=s(3546),P=s(7866);let Z=(()=>{class o{constructor(){this.title="",this.code="",this.pickedCodeBlock=new t.vpe}ngOnInit(){}onPickCodeBlock(){this.pickedCodeBlock.emit()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["moveo-task-lobby-code-block-item"]],inputs:{title:"title",code:"code"},outputs:{pickedCodeBlock:"pickedCodeBlock"},decls:10,vars:2,consts:[[1,"code-block-card"],[1,"pre-format-wrapper"],[1,"code-wrapper",3,"highlight"],["mat-button","",3,"click"]],template:function(e,c){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"pre",1),t._UZ(6,"code",2),t.qZA()(),t.TgZ(7,"mat-card-actions")(8,"button",3),t.NdJ("click",function(){return c.onPickCodeBlock()}),t._uU(9,"Pick Code Block"),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(c.title),t.xp6(3),t.Q6J("highlight",c.code))},dependencies:[L.lW,p.a8,p.dk,p.dn,p.n5,p.hq,P.y$],styles:[".code-block-card[_ngcontent-%COMP%]{width:400px}.code-block-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding-top:20px}"]}),o})();function w(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"moveo-task-lobby-code-block-item",6),t.NdJ("pickedCodeBlock",function(){const r=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.onPickedCodeBlock(r.id))}),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("title",e.title)("code",e.code)}}function F(o,n){if(1&o&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Generated Link: ",e.link," ")}}let I=(()=>{class o{constructor(e){this.dialog=e,this.students=[],this.codeBlocks=[],this.link=null,this.onGenerateSessionLink=new t.vpe}ngOnInit(){}onPickedCodeBlock(e){this.dialog.open(O,{width:"400px",height:"500px",data:{students:this.students}}).afterClosed().subscribe(i=>{i&&this.onGenerateSessionLink.emit({studentId:i,codeBlockId:e})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["moveo-task-lobby"]],inputs:{students:"students",codeBlocks:"codeBlocks",link:"link"},outputs:{onGenerateSessionLink:"onGenerateSessionLink"},decls:7,vars:2,consts:[[1,"page-wrapper"],[1,"page-header"],[1,"main-content-list"],[1,"code-blocks-list"],[3,"title","code","pickedCodeBlock",4,"ngFor","ngForOf"],["class","generated-link-wrapper",4,"ngIf"],[3,"title","code","pickedCodeBlock"],[1,"generated-link-wrapper"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Choose code block"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,w,1,2,"moveo-task-lobby-code-block-item",4),t.qZA(),t.YNc(6,F,2,1,"div",5),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngForOf",c.codeBlocks),t.xp6(1),t.Q6J("ngIf",c.link))},dependencies:[a.sg,a.O5,Z],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:30px;box-sizing:border-box}.page-wrapper[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{font-size:40px;margin-bottom:30px}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]   .code-blocks-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;row-gap:20px;column-gap:20px}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]   .generated-link-wrapper[_ngcontent-%COMP%]{font-size:20px;align-self:center}"]}),o})();function T(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"moveo-task-lobby",1),t.NdJ("onGenerateSessionLink",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.generateSessionLink(i))}),t.qZA(),t.BQk()}if(2&o){const e=n.ngIf;t.xp6(1),t.Q6J("students",e.students)("codeBlocks",e.codeBlocks)("link",e.link)}}const _=[{path:"",component:(()=>{class o{constructor(e){this.store=e,this.lobbyState$=this.store.pipe((0,u.Ys)(S))}ngOnInit(){this.store.dispatch((0,d.H4)()),this.store.dispatch((0,d.sK)())}generateSessionLink(e){console.log("yuval debug-",e),this.store.dispatch((0,d.zD)({payload:{codeBlockId:e.codeBlockId,studentId:e.studentId}}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["moveo-task-login-container"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"students","codeBlocks","link","onGenerateSessionLink"]],template:function(e,c){1&e&&(t.YNc(0,T,2,3,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,c.lobbyState$))},dependencies:[a.O5,I,a.Ov],encapsulation:2}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.Bz.forChild(_),v.Bz]}),o})();var G=s(6907),B=s(966),l=s(2260),b=s(6129),m=s(4004),k=s(262),f=s(9646),y=s(7097),z=s(529);let $=(()=>{class o{constructor(e){this.http=e}getStudents(){return this.http.get(y.zH.original)}getCodeBlocks(){return this.http.get(y.pc.original)}generateSessionLink(e,c){return this.http.post(y.EQ.original,{codeblock_id:e,student_id:c})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(z.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),J=(()=>{class o{constructor(e,c){this.actions$=e,this.lobbyService=c,this.getStudents$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.sK),(0,b.z)(()=>this.lobbyService.getStudents().pipe((0,m.U)(i=>(0,d.dK)({payload:{students:i}})),(0,k.K)(i=>(0,f.of)((0,d.bO)())))))),this.getCodeBlocks$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.H4),(0,b.z)(()=>this.lobbyService.getCodeBlocks().pipe((0,m.U)(i=>(0,d.By)({payload:{codeBlocks:i}})),(0,k.K)(i=>(0,f.of)((0,d.Ij)())))))),this.generateSessionLink$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.zD),(0,b.z)(i=>this.lobbyService.generateSessionLink(i.payload.codeBlockId,i.payload.studentId).pipe((0,m.U)(r=>(0,d.vz)({payload:{link:r.link}})),(0,k.K)(r=>(0,f.of)((0,d.t6)()))))))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(l.eX),t.LFG($))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[A,G.m,u.Aw.forFeature(B.DD,B.T0),l.sQ.forFeature([J])]}),o})()}}]);