"use strict";(self.webpackChunkmoveo_task_client=self.webpackChunkmoveo_task_client||[]).push([[450],{450:(Q,h,s)=>{s.r(h),s.d(h,{LobbyModule:()=>Y});var v=s(1791),u=s(9653);const S=(0,u.ZF)("lobby");var d=s(1052),t=s(4650),a=s(6895),m=s(5938),L=s(4859);function M(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(){const l=t.CHM(o).$implicit,C=t.oxw();return t.KtG(C.onStudentPicked(l))}),t._uU(2),t.qZA()()}if(2&e){const o=n.$implicit;t.xp6(2),t.Oqu(o.username)}}let O=(()=>{class e{constructor(o,c){this.data=o,this.dialogRef=c,this.students=[]}ngOnInit(){this.students=this.data.students}onStudentPicked(o){this.dialogRef.close(o?.id)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.WI),t.Y36(m.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-students-modal"]],decls:5,vars:1,consts:[[1,"page-wrapper"],[1,"page-heder"],[1,"students-list-wrapper"],["class","student-button-wrapper",4,"ngFor","ngForOf"],[1,"student-button-wrapper"],["mat-button","",3,"click"]],template:function(o,c){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Pick A Student For A Session"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,M,3,1,"div",3),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngForOf",c.students))},dependencies:[a.sg,L.lW],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-wrapper[_ngcontent-%COMP%]   .page-heder[_ngcontent-%COMP%]{font-size:22px}.page-wrapper[_ngcontent-%COMP%]   .students-list-wrapper[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column}"]}),e})();var p=s(3546),P=s(7866);let Z=(()=>{class e{constructor(){this.title="",this.code="",this.pickedCodeBlock=new t.vpe}ngOnInit(){}onPickCodeBlock(){this.pickedCodeBlock.emit()}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-lobby-code-block-item"]],inputs:{title:"title",code:"code"},outputs:{pickedCodeBlock:"pickedCodeBlock"},decls:10,vars:2,consts:[[1,"code-block-card"],[1,"pre-format-wrapper"],[1,"code-wrapper",3,"highlight"],["mat-button","",3,"click"]],template:function(o,c){1&o&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"pre",1),t._UZ(6,"code",2),t.qZA()(),t.TgZ(7,"mat-card-actions")(8,"button",3),t.NdJ("click",function(){return c.onPickCodeBlock()}),t._uU(9,"Pick Code Block"),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(c.title),t.xp6(3),t.Q6J("highlight",c.code))},dependencies:[L.lW,p.a8,p.dk,p.dn,p.n5,p.hq,P.y$],styles:[".code-block-card[_ngcontent-%COMP%]{width:400px}.code-block-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding-top:20px}"]}),e})();function w(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"moveo-task-lobby-code-block-item",6),t.NdJ("pickedCodeBlock",function(){const l=t.CHM(o).$implicit,C=t.oxw();return t.KtG(C.onPickedCodeBlock(l.id))}),t.qZA()}if(2&e){const o=n.$implicit;t.Q6J("title",o.title)("code",o.code)}}function F(e,n){if(1&e&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" Generated Link: ",o.link," ")}}let I=(()=>{class e{constructor(o){this.dialog=o,this.students=[],this.codeBlocks=[],this.link=null,this.onGenerateSessionLink=new t.vpe}ngOnInit(){}onPickedCodeBlock(o){this.dialog.open(O,{width:"400px",height:"500px",data:{students:this.students}}).afterClosed().subscribe(i=>{i&&this.onGenerateSessionLink.emit({studentId:i,codeBlockId:o})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-lobby"]],inputs:{students:"students",codeBlocks:"codeBlocks",link:"link"},outputs:{onGenerateSessionLink:"onGenerateSessionLink"},decls:7,vars:2,consts:[[1,"page-wrapper"],[1,"page-header"],[1,"main-content-list"],[1,"code-blocks-list"],[3,"title","code","pickedCodeBlock",4,"ngFor","ngForOf"],["class","generated-link-wrapper",4,"ngIf"],[3,"title","code","pickedCodeBlock"],[1,"generated-link-wrapper"]],template:function(o,c){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Choose code block"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,w,1,2,"moveo-task-lobby-code-block-item",4),t.qZA(),t.YNc(6,F,2,1,"div",5),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("ngForOf",c.codeBlocks),t.xp6(1),t.Q6J("ngIf",c.link))},dependencies:[a.sg,a.O5,Z],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:30px;box-sizing:border-box}.page-wrapper[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{font-size:40px;margin-bottom:30px}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]   .code-blocks-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;row-gap:20px;column-gap:20px}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]   .generated-link-wrapper[_ngcontent-%COMP%]{font-size:20px;align-self:center}"]}),e})();function T(e,n){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"moveo-task-lobby",1),t.NdJ("onGenerateSessionLink",function(i){t.CHM(o);const l=t.oxw();return t.KtG(l.generateSessionLink(i))}),t.qZA(),t.BQk()}if(2&e){const o=n.ngIf;t.xp6(1),t.Q6J("students",o.students)("codeBlocks",o.codeBlocks)("link",o.link)}}const _=[{path:"",component:(()=>{class e{constructor(o){this.store=o,this.lobbyState$=this.store.pipe((0,u.Ys)(S))}ngOnInit(){this.store.dispatch((0,d.H4)()),this.store.dispatch((0,d.sK)())}generateSessionLink(o){this.store.dispatch((0,d.zD)({payload:{codeBlockId:o.codeBlockId,studentId:o.studentId}}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-login-container"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"students","codeBlocks","link","onGenerateSessionLink"]],template:function(o,c){1&o&&(t.YNc(0,T,2,3,"ng-container",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,c.lobbyState$))},dependencies:[a.O5,I,a.Ov],encapsulation:2}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.Bz.forChild(_),v.Bz]}),e})();var G=s(6907),B=s(966),r=s(2260),b=s(6129),g=s(4004),k=s(262),f=s(9646),y=s(7097),z=s(529);let $=(()=>{class e{constructor(o){this.http=o}getStudents(){return this.http.get(y.zH.original)}getCodeBlocks(){return this.http.get(y.pc.original)}generateSessionLink(o,c){return this.http.post(y.EQ.original,{codeblock_id:o,student_id:c})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),J=(()=>{class e{constructor(o,c){this.actions$=o,this.lobbyService=c,this.getStudents$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(d.sK),(0,b.z)(()=>this.lobbyService.getStudents().pipe((0,g.U)(i=>(0,d.dK)({payload:{students:i}})),(0,k.K)(i=>(0,f.of)((0,d.bO)())))))),this.getCodeBlocks$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(d.H4),(0,b.z)(()=>this.lobbyService.getCodeBlocks().pipe((0,g.U)(i=>(0,d.By)({payload:{codeBlocks:i}})),(0,k.K)(i=>(0,f.of)((0,d.Ij)())))))),this.generateSessionLink$=(0,r.GW)(()=>this.actions$.pipe((0,r.l4)(d.zD),(0,b.z)(i=>this.lobbyService.generateSessionLink(i.payload.codeBlockId,i.payload.studentId).pipe((0,g.U)(l=>(0,d.vz)({payload:{link:l.link}})),(0,k.K)(l=>(0,f.of)((0,d.t6)()))))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(r.eX),t.LFG($))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[A,G.m,u.Aw.forFeature(B.DD,B.T0),r.sQ.forFeature([J])]}),e})()}}]);