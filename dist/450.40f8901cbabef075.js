"use strict";(self.webpackChunkmoveo_task_client=self.webpackChunkmoveo_task_client||[]).push([[450],{450:(Q,y,c)=>{c.r(y),c.d(y,{LobbyModule:()=>Y});var v=c(1791),g=c(9653);const O=(0,g.ZF)("lobby");var r=c(1052),t=c(4650),l=c(6895),u=c(5938),x=c(4859);function B(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",4)(1,"button",5),t.NdJ("click",function(){const a=t.CHM(o).$implicit,h=t.oxw();return t.KtG(h.onStudentPicked(a))}),t._uU(2),t.qZA()()}if(2&e){const o=n.$implicit;t.xp6(2),t.Oqu(o.username)}}let P=(()=>{class e{constructor(o,s){this.data=o,this.dialogRef=s,this.students=[]}ngOnInit(){this.students=this.data.students}onStudentPicked(o){this.dialogRef.close(o?.id)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.WI),t.Y36(u.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-students-modal"]],decls:5,vars:1,consts:[[1,"page-wrapper"],[1,"page-heder"],[1,"students-list-wrapper"],["class","student-button-wrapper",4,"ngFor","ngForOf"],[1,"student-button-wrapper"],["mat-button","",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Pick A Student For A Session"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,B,3,1,"div",3),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngForOf",s.students))},dependencies:[l.sg,x.lW],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-wrapper[_ngcontent-%COMP%]   .page-heder[_ngcontent-%COMP%]{font-size:22px}.page-wrapper[_ngcontent-%COMP%]   .students-list-wrapper[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column}"]}),e})();var p=c(3546),S=c(7866);let _=(()=>{class e{constructor(){this.title="",this.code="",this.pickedCodeBlock=new t.vpe}ngOnInit(){}onPickCodeBlock(){this.pickedCodeBlock.emit()}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-lobby-code-block-item"]],inputs:{title:"title",code:"code"},outputs:{pickedCodeBlock:"pickedCodeBlock"},decls:10,vars:2,consts:[[1,"code-block-card"],[1,"pre-format-wrapper"],[1,"code-wrapper",3,"highlight"],["mat-button","",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"pre",1),t._UZ(6,"code",2),t.qZA()(),t.TgZ(7,"mat-card-actions")(8,"button",3),t.NdJ("click",function(){return s.onPickCodeBlock()}),t._uU(9,"Pick Code Block"),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(s.title),t.xp6(3),t.Q6J("highlight",s.code))},dependencies:[x.lW,p.a8,p.dk,p.dn,p.n5,p.hq,S.y$],styles:[".code-block-card[_ngcontent-%COMP%]{width:400px;height:400px}.code-block-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{height:32px}.code-block-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:300px}.code-block-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pre-format-wrapper[_ngcontent-%COMP%]{height:300px}.code-block-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .pre-format-wrapper[_ngcontent-%COMP%]   .code-wrapper[_ngcontent-%COMP%]{height:300px}.code-block-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding-top:20px}"]}),e})();function w(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"moveo-task-lobby-code-block-item",6),t.NdJ("pickedCodeBlock",function(){const a=t.CHM(o).$implicit,h=t.oxw();return t.KtG(h.onPickedCodeBlock(a.id))}),t.qZA()}if(2&e){const o=n.$implicit;t.Q6J("title",o.title)("code",o.code)}}function Z(e,n){if(1&e&&(t.TgZ(0,"div",7),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" Generated Link: ",o.link," ")}}let F=(()=>{class e{constructor(o){this.dialog=o,this.students=[],this.codeBlocks=[],this.link=null,this.onGenerateSessionLink=new t.vpe}ngOnInit(){}onPickedCodeBlock(o){this.dialog.open(P,{width:"400px",height:"500px",data:{students:this.students}}).afterClosed().subscribe(i=>{i&&this.onGenerateSessionLink.emit({studentId:i,codeBlockId:o})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-lobby"]],inputs:{students:"students",codeBlocks:"codeBlocks",link:"link"},outputs:{onGenerateSessionLink:"onGenerateSessionLink"},decls:7,vars:2,consts:[[1,"page-wrapper"],[1,"page-header"],[1,"main-content-list"],[1,"code-blocks-list"],[3,"title","code","pickedCodeBlock",4,"ngFor","ngForOf"],["class","generated-link-wrapper",4,"ngIf"],[3,"title","code","pickedCodeBlock"],[1,"generated-link-wrapper"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Choose code block"),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,w,1,2,"moveo-task-lobby-code-block-item",4),t.qZA(),t.YNc(6,Z,2,1,"div",5),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("ngForOf",s.codeBlocks),t.xp6(1),t.Q6J("ngIf",s.link))},dependencies:[l.sg,l.O5,_],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:30px;box-sizing:border-box}.page-wrapper[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{font-size:40px;margin-bottom:30px}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]   .code-blocks-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;row-gap:20px;column-gap:20px}.page-wrapper[_ngcontent-%COMP%]   .main-content-list[_ngcontent-%COMP%]   .generated-link-wrapper[_ngcontent-%COMP%]{font-size:20px;align-self:center}"]}),e})();function I(e,n){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"moveo-task-lobby",1),t.NdJ("onGenerateSessionLink",function(i){t.CHM(o);const a=t.oxw();return t.KtG(a.generateSessionLink(i))}),t.qZA(),t.BQk()}if(2&e){const o=n.ngIf;t.xp6(1),t.Q6J("students",o.students)("codeBlocks",o.codeBlocks)("link",o.link)}}const T=[{path:"",component:(()=>{class e{constructor(o){this.store=o,this.lobbyState$=this.store.pipe((0,g.Ys)(O))}ngOnInit(){this.store.dispatch((0,r.H4)()),this.store.dispatch((0,r.sK)())}generateSessionLink(o){this.store.dispatch((0,r.zD)({payload:{codeBlockId:o.codeBlockId,studentId:o.studentId}}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["moveo-task-login-container"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"students","codeBlocks","link","onGenerateSessionLink"]],template:function(o,s){1&o&&(t.YNc(0,I,2,3,"ng-container",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,s.lobbyState$))},dependencies:[l.O5,F,l.Ov],encapsulation:2}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.Bz.forChild(T),v.Bz]}),e})();var G=c(6907),M=c(966),d=c(2260),m=c(6129),b=c(4004),k=c(262),C=c(9646),f=c(7097),z=c(529);let $=(()=>{class e{constructor(o){this.http=o}getStudents(){return this.http.get(f.zH.original)}getCodeBlocks(){return this.http.get(f.pc.original)}generateSessionLink(o,s){return this.http.post(f.EQ.original,{codeblock_id:o,student_id:s})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),J=(()=>{class e{constructor(o,s){this.actions$=o,this.lobbyService=s,this.getStudents$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(r.sK),(0,m.z)(()=>this.lobbyService.getStudents().pipe((0,b.U)(i=>(0,r.dK)({payload:{students:i}})),(0,k.K)(i=>(0,C.of)((0,r.bO)())))))),this.getCodeBlocks$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(r.H4),(0,m.z)(()=>this.lobbyService.getCodeBlocks().pipe((0,b.U)(i=>(0,r.By)({payload:{codeBlocks:i}})),(0,k.K)(i=>(0,C.of)((0,r.Ij)())))))),this.generateSessionLink$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(r.zD),(0,m.z)(i=>this.lobbyService.generateSessionLink(i.payload.codeBlockId,i.payload.studentId).pipe((0,b.U)(a=>(0,r.vz)({payload:{link:a.link}})),(0,k.K)(a=>(0,C.of)((0,r.t6)()))))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(d.eX),t.LFG($))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[A,G.m,g.Aw.forFeature(M.DD,M.T0),d.sQ.forFeature([J])]}),e})()}}]);